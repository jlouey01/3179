{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 400,
  "data": {
    "url": "https://raw.githubusercontent.com/jlouey01/3179/refs/heads/main/Homework%20Week%2010/Formula1_2023season_raceResults.csv",
    "format": {"type": "csv"}
  },
  "params": [
    {
      "name": "team_selection",
      "value": "All Teams",
      "bind": {
        "input": "select",
        "options": [
          "All Teams",
          "Alfa Romeo Ferrari",
          "AlphaTauri Honda RBPT",
          "Alpine Renault",
          "Aston Martin Aramco Mercedes",
          "Ferrari",
          "Haas Ferrari",
          "McLaren Mercedes",
          "Mercedes",
          "Red Bull Racing Honda RBPT",
          "Williams Mercedes"
        ],
        "name": "Team Selection: "
      }
    }
  ],
  "transform": [
    {
      "filter": "team_selection == 'All Teams' || datum.Team === team_selection"
    },
    {
      "filter": "isValid(datum['Track Order']) && isValid(datum['Points'])"
    },
    {
      "aggregate": [
        {
          "op": "sum",
          "field": "Points",
          "as": "Total Points"
        },
        {
          "op": "min",
          "field": "Track",
          "as": "Track Name"
        }
      ],
      "groupby": ["Team", "Track Order"]
    },
    {
      "window": [
        {
          "op": "sum",
          "field": "Total Points",
          "as": "Cumulative Points"
        }
      ],
      "groupby": ["Team"],
      "sort": [
        {"field": "Track Order", "order": "ascending"}
      ]
    }
  ],
  "layer": [
    {
      "mark": {
        "type": "line",
        "point": true
      },
      "encoding": {
        "x": {
          "field": "Track Order",
          "type": "quantitative",
          "title": "Race Number",
          "axis": {
            "labelAngle": 0,
            "format": "d"
          },
          "scale": {
            "domainMin": 1
          }
        },
        "y": {
          "field": "Cumulative Points",
          "type": "quantitative",
          "title": "Cumulative Points"
        },
        "color": {
          "field": "Team",
          "type": "nominal",
          "legend": {
            "title": "Team",
            "orient": "right",
            "offset": 50
          },
          "scale": {
            "domain": [
              "Alfa Romeo Ferrari",
              "AlphaTauri Honda RBPT",
              "Alpine Renault",
              "Aston Martin Aramco Mercedes",
              "Ferrari",
              "Haas Ferrari",
              "McLaren Mercedes",
              "Mercedes",
              "Red Bull Racing Honda RBPT",
              "Williams Mercedes"
            ],
            "range": [
              "#8B0000", 
              "#2B4562", 
              "#005AFF", 
              "#006F62", 
              "#FF6347", 
              "#A9A9A9", 
              "#FF8700", 
              "#00D2BE",  
              "#1E41FF",  
              "#1E90FF"  
            ]
          }
        },
        "tooltip": [
          {"field": "Track Name", "title": "Race Track"},
          {"field": "Team", "title": "Team"},
          {"field": "Total Points", "title": "Points Scored in Race"},
          {"field": "Cumulative Points", "title": "Total Cumulative Points"}
        ]
      }
    },
    {
      "transform": [
        {
          "filter": "datum['Track Order'] == 22"
        }
      ],
      "mark": {"type": "text", "align": "left", "dx": 5, "dy": -5, "fontSize": 10, "fontWeight": "bold"},
      "encoding": {
        "x": {"field": "Track Order", "type": "quantitative"},
        "y": {"field": "Cumulative Points", "type": "quantitative"},
        "text": {"field": "Cumulative Points"},
        "color": {
          "field": "Team",
          "type": "nominal"
        }
      }
    }
  ]
}
